import{an as g,ao as p,j as u,b as f,l as m,m as w,w as r,t as o,ae as c,A as P,r as _}from"./index-DIR6V6xD.js";import{Q as b,a as y}from"./QTable-CapXnh-p.js";import{Q as h}from"./QPage-DP8WAE0C.js";import{_ as v,A as x}from"./AppCard-OIxCkgEC.js";import"./selection-MrEIC5Nt.js";import"./format-BvkBI9bc.js";const U=g("users",{state:()=>({users:[],loading:!1,total:0}),actions:{async fetchUsers(n={page:1,rowsPerPage:10}){this.loading=!0;try{const a=await p.get("/users",{params:{page:n.page,limit:n.rowsPerPage}});this.users=a.data.items,this.total=a.data.total}catch(a){console.error(a)}finally{this.loading=!1}}}}),q=u({name:"UsersPage",__name:"UsersPage",setup(n){const a=U(),d=[{name:"id",label:"ID",field:"id",sortable:!0,align:"left"},{name:"login",label:"Login",field:"login",sortable:!0,align:"left"},{name:"actions",label:"Actions",field:"actions",align:"center"}],e=_({sortBy:"id",descending:!1,page:1,rowsPerPage:10,rowsNumber:0});async function i(l){const{page:t,rowsPerPage:s}=l.pagination;await a.fetchUsers({page:t,rowsPerPage:s}),e.value.page=t,e.value.rowsPerPage=s,e.value.rowsNumber=a.total}return f(()=>{i({pagination:e.value})}),(l,t)=>(m(),w(h,{class:"q-pa-md"},{default:r(()=>[o(v,{title:"Users"}),o(x,null,{default:r(()=>[o(b,{rows:c(a).users,columns:d,"row-key":"id",pagination:e.value,"onUpdate:pagination":t[0]||(t[0]=s=>e.value=s),loading:c(a).loading,flat:"","card-class":"bg-surface text-text-primary","table-header-class":"text-text-secondary",onRequest:i},{"body-cell-actions":r(s=>[o(y,{props:s},{default:r(()=>[o(P,{flat:"",round:"",icon:"edit",size:"sm"})]),_:1},8,["props"])]),_:1},8,["rows","pagination","loading"])]),_:1})]),_:1}))}});export{q as default};
